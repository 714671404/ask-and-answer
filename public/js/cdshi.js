(function(z){
    var BO=function(a,b,c){if(Array.isArray(b))return BO(a,null,b);b&&(a.hb=b);Array.isArray(c)&&(a.bI=c);a.gC();z.Kj(a)};var CO=function(){z.Q.call(this)};
    var DO=function(){var a=(0,window.$)(".QRCode-card"),b=(0,window.$)(".QRCode-toggleButton"),c=(0,window.$)(".QRCode-toggleButtonText",b);(0,window.$)("body").on("click",function(d){a.is(":visible")?Boolean((0,window.$)(d.target).closest(a).length)||(a.addClass("fadeOutDown").onTransitionEnd(function(){a.hide().removeClass("fadeOutDown")},200),c.text("下载知乎 App")):Boolean((0,window.$)(d.target).closest(b).length)&&(a.addClass("fadeInUp").show().onTransitionEnd(function(){a.removeClass("fadeInUp")},
        200),c.text("关闭二维码"),z.V.trackEvent(d.target,{action:"Download",element:"Button"}))})};var EO=function(){var a=(0,window.$)(".sign-flow");if(a.length){var b=new FO;b.w(a[0]);b.g("trackRequested",function(a){a.preventDefault();a.label="home_default";z.ti(a)})}};
    var GO=function(){function a(){var a=window.particlesJS;a&&((0,window.$)("\x3cdiv\x3e",{id:"particles"}).appendTo("body"),a("particles",c))}var b=!!window.HTMLCanvasElement,c={particles:{number:{value:20,density:{enable:!0,value_area:1E3}},color:{value:"#e1e1e1"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:15,random:!0,anim:{enable:!1,
        speed:180,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:650,color:"#cfcfcf",opacity:.26,width:1},move:{enable:!0,speed:2,direction:"none",random:!0,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!1,mode:"repulse"},onclick:{enable:!1,mode:"push"},resize:!0},modes:{grab:{distance:400,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:200,duration:.4},
        push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0};(0,window.$)(function(){b&&window.$.ajax({url:"/static/revved/components/particles.js/particles.min.00debcf6.js",dataType:"script",cache:!0}).then(a)})};var FO=function(){z.Q.call(this)};var HO=function(a){return!/^\+?[0-9]+$/.test(a)};var IO=function(a,b){a.account&&(a[b]=a.account,delete a.account)};
    var JO=function(a){if(!z.ik){var b=(0,window.$)("form",a.qb),c=(0,window.$)(".qrcode-signin-container",a.qb);a.HL="qrcode";b.hide();c.show();KO(a);LO(a);z.V.trackEvent(a,{action:"Click",name:"使用二维码登录"})}};
    var MO=function(a){var b=(0,window.$)("form",a.qb),c=(0,window.$)(".signin-switch-qrcode-buttons",b),d=(0,window.$)(".qrcode-signin-container",a.qb),f=(0,window.$)(".signin-switch-password",d),g=(0,window.$)(".qrcode-goto-scan",d),h=(0,window.$)(".qrcode-signin-step1",a.qb);c.click(function(){JO(a)});f.click(function(){NO(a);a.HL="password";b.show();d.hide();z.V.trackEvent(a,{action:"Click",name:"使用密码登录"})});g.click(function(){KO(a);LO(a)});h.mouseenter(function(){OO(a)});h.mouseleave(function(){PO(a)})};
    var OO=function(a){(0,window.$)(".qrcode-signin-guide",a.qb).stop(!0,!0).animate({opacity:1,left:"-318px"},300)};var PO=function(a){(0,window.$)(".qrcode-signin-guide",a.qb).stop(!0,!0).animate({opacity:0,left:"-288px"},300)};var NO=function(a){a.HK&&window.clearInterval(a.HK)};
    var QO=function(a,b){var c=(0,window.$)(".qrcode-signin-img-wrapper img",a.qb);c.hasClass("qrcode-signin-loading")&&c.removeClass("qrcode-signin-loading").addClass("qrcode-signin-img");c.attr("src","https://account.zhihu.com/api/login/qrcode/"+b+"/image");RO(a,b)};var RO=function(a,b){NO(a);a.HK=(0,window.setInterval)(function(){SO(a,b)},2E3)};
    var KO=function(a,b){var c=(0,window.$)(".qrcode-signin-step1",a.qb),d=(0,window.$)(".qrcode-signin-step2",a.qb),f=(0,window.$)(".qrcode-signin-failure",a.qb);if(d.is(":hidden")||2!==b)2===b?(c.hide(),d.show()):(c.show(),d.hide()),f.hide(),PO(a)};var TO=function(a,b){var c=(0,window.$)(".qrcode-signin-step1",a.qb),d=(0,window.$)(".qrcode-signin-step2",a.qb),f=(0,window.$)(".qrcode-signin-failure",a.qb),g=(0,window.$)(".qrcode-signin-failure-message",a.qb);PO(a);c.hide();d.hide();g.html(b||"");f.show()};
    var SO=function(a,b){window.$.ajax({type:"GET",url:"https://account.zhihu.com/api/login/qrcode/"+b+"/scan_info",dataType:"json",data:{client_id:"060fc1d4872f49ec89d74814806b1c8e"},xhrFields:{withCredentials:!0},crossDomain:!0,success:function(b){1===b.status?KO(a,2):3===b.status?(KO(a,1),LO(a,!1)):b.new_token&&b.new_token.token?(QO(a,b.new_token.token),KO(a,1)):b.access_token&&a.td()},error:function(b){NO(a);b.responseJSON&&b.responseJSON.error&&40321===b.responseJSON.error.code&&TO(a,b.responseJSON.error.message)}})};
    var LO=function(a,b){window.$.ajax({type:"POST",url:"https://account.zhihu.com/api/login/qrcode",dataType:"json",data:{client_id:"060fc1d4872f49ec89d74814806b1c8e"},xhrFields:{withCredentials:!0},crossDomain:!0,success:function(c){c.token&&(!1!==b&&OO(a),QO(a,c.token))},error:function(b){NO(a);b.responseJSON&&b.responseJSON.error&&(40321===b.responseJSON.error.code?TO(a,b.responseJSON.error.message):40320!==b.responseJSON.error.code||a.mR||(a.mR=!0,window.$.post("https://www.zhihu.com/udid").done(function(){LO(a)})))}})};
    var UO=function(a){var b=(0,window.$)("form",a.qb),c=a.Ap((0,window.$)(".send-code-button",b),function(){c.start();var d=b.Zb();d.account||(b.data("validator").showErrors({account:"请输入正确的手机号码"}),c.cancel());window.$.get("/send_login_verification_code/sms",{phone_num:d.account,captcha:d.captcha,captcha_type:d.captcha_type||"en",captcha_source:"login"},function(d){d.r&&(z.Kj(a.Oh),b.data("validator").showErrors(d.data),c.cancel())})},!1)};
    var VO=function(a){var b=(0,window.$)("form",a.qb),c=(0,window.$)(".signin-switch-button",b),d=(0,window.$)(".unable-login",b),f=(0,window.$)(".account \x3e input",b),g=(0,window.$)(".verification"),h=(0,window.$)("input",g),k=(0,window.$)(".send-code-button",b),l=(0,window.$)(".captcha-module, .Captcha",b).first();c.click(function(){z.V.trackEvent(b,{action:"Switch",element:"Button"},{account:a.ld("login")});a.bi?(f.attr({type:"tel",placeholder:"手机号","aria-label":"手机号"}).required=!0,a.df(f.val())&&
    f.val(""),d.hide(),g.addClass("sms-verification"),h.attr({type:"number",name:"verification_code","aria-label":"短信验证码",placeholder:"短信验证码",maxlength:6}).val("").required=!0,c.text("密码登录（手机号或邮箱）"),g.addClass("sms-verification"),k.show(),l.insertBefore(g),a.bi=!1,BO(a.Oh,"smsLogin",["verification_code"]),a.qb.attr("data-za-module","SMSSignInForm")):(f.attr({type:"text",placeholder:"手机号或邮箱","aria-label":"手机号或邮箱"}).required=!0,d.show(),g.removeClass("sms-verification"),h.attr({type:"password",name:"password",
        "aria-label":"密码",placeholder:"密码",maxlength:null}).val("").required=!0,c.text("手机验证码登录"),g.removeClass("sms-verification"),k.hide(),l.insertAfter(g),a.bi=!0,BO(a.Oh,"login",[]),a.qb.attr("data-za-module","SignInForm"))})};
    var WO=function(a){var b=(0,window.$)('meta[http-equiv\x3d"X-ZA-Experiment"]'),c=(0,window.$)(".index-tab-navs a",a.h),d=(0,z.t)(function(){var a=window.location.hash||c.filter(".active").attr("href"),d=c.filter(function(){return(0,window.$)(this).attr("href")===a});d.addClass("active").siblings().removeClass("active");d.parent().attr("data-active-index",d.index());"#signin"===a?(this.qb.is(":visible")||(this.me.hide(),this.qb.show(),this.dm()),!this.bU&&0<b.length&&-1!==b.attr("content").indexOf("qrcode_login:qrcode")&&
    !z.Y.ab?(this.bU=!0,JO(this)):"qrcode"===this.HL&&(KO(this),LO(this))):"#signup"===a&&(this.me.is(":visible")||(this.qb.hide(),this.me.show(),this.dm()),NO(this))},a);a.o().g(window,"hashchange",d);d();c.click(function(a){z.V.trackEvent(a.target,{action:"OpenUrl",element:"Link",element_name:"#signin"===(0,window.$)(a.target).attr("href")?"SignIn":"SignUp"},{link:{url:a.target.href,anchor:a.target.innerText}})})};
    var XO=function(a){function b(a){return a.toArray().every(function(a){return a.value})}a.qb=(0,window.$)(".view-signin",a.h);var c=(0,window.$)("form",a.qb),d=(0,window.$)("button.submit",c);c.validate(window.$.extend({},z.$m,{submitHandler:z.Ci(d,window.$.proxy(a.tB,a)),invalidHandler:function(b,c){a.Oh&&z.Kj(a.Oh);z.V.trackEvent(a.qb.get(0),{action:"StatusReport",element_name:a.O0?"SignIn":"SMSSignIn"},{status:{result:"Fail",error_msg:window.$.map(c.errorList,function(a){return a.element.name+":"+
        a.message}),event:{action:"SignIn",element:"Button"}},account:a.ld("login")})}}));var f=(0,window.$)('input[name\x3d"account"]',c);(0,window.$)(".unable-login",a.qb).click(function(){a.bi&&((new z.gk(f.val())).show(),z.V.trackEvent(this,{action:"Click",element:"Button",element_name:"UnableSignIn"}))});d=(0,window.$)(".captcha-module, .Captcha",c).get(0);a.Oh=new z.Gj("login");a.Oh.w(d);var g=(0,window.$)('input[name\x3d"account"], input[name\x3d"password"]',c);g.on("input",function(){!a.CU&&b(g)&&
    (a.CU=!0,z.Kj(a.Oh))})};
    var YO=function(a){function b(a){return a.toArray().every(function(a){return a.value})}a.me=(0,window.$)(".view-signup",a.h);var c=(0,window.$)("form",a.me);a.ci=!(0,window.$)('input[name\x3d"phone_num"]',c).length;var d=(0,window.$)("button.submit",c);c.validate(window.$.extend({},z.$m,{submitHandler:z.Ci(d,window.$.proxy(a.sq,a)),invalidHandler:function(b,c){a.Zk&&z.Kj(a.Zk);z.V.trackEvent(a.me.get(0),{action:"StatusReport"},{status:{result:"Fail",error_msg:window.$.map(c.errorList,function(a){return a.element.name+
        ":"+a.message}),event:{action:"SignUp",element:"Button"}},account:a.ld("register")})}}));var f=(0,window.$)('input[name\x3d"account"]',c);a.me.on("click",".switch-to-login",function(){"/org/signup"===window.location.pathname?window.location.href="/signin":window.location.hash="#signin";var b=f.val();b&&(0,window.$)('input[name\x3d"account"]',a.$Z).val(b)}).on("change",".agreement input",function(){var a=(0,window.$)(this);a.is(":checked")&&a.parents(".agreement").find(".error").remove()});d=(0,window.$)(".input-wrapper[data-type]",
        c).get(0);a.Zk=new z.Gj("register");a.Zk.w(d);var g=(0,window.$)('input[name\x3d"account"], input[name\x3d"fullname"], input[name\x3d"password"]',c);g.on("input",function(){!a.tX&&b(g)&&(a.tX=!0,z.Kj(a.Zk))});a.Fn=new z.vk(c);a.Fn.start()};var ZO=function(){var a=z.Ai.get("accountcallback");z.Ai.remove("accountcallback");if(a){a=(0,window.decodeURIComponent)(a);try{var b=JSON.parse(a);z.U.dispatchEvent(new z.jj("accountcallback",b))}catch(c){}}};z.y(CO,z.Q);CO.prototype.init=function(){this.w(window.document.body)};
    CO.prototype.C=function(a){CO.v.C.call(this,a);EO();GO();DO();z.ti({category:"view_home",action:"visit_home"})};z.y(FO,z.Q);z.e=FO.prototype;z.e.C=function(){FO.v.C.call(this);this.hA()};z.e.sa=function(a){this.dispatchEvent(window.$.extend({type:"trackRequested"},a))};
    z.e.hA=function(){function a(a,b){(0,window.$)(":submit",a).click(function(){return b(a)});(0,window.$)("keydown",a).click(function(c){if(13===c.keyCode)return b(a)})}var b=this.h=this.m();XO(this);YO(this);this.sp();ZO();this.dm();WO(this);var c=z.ik;this.bi=c;c||(this.bi=!0,UO(this),VO(this),MO(this));var d=this;a((0,window.$)(".view-signin form",b),function(a){var b=a.Zb().account,c=HO(b);d.sa({category:"sign_in",action:b?"click_sign_in_submit_"+(c?"email":"phone"):"click_sign_in_submit_no_channel"});
        z.V.trackEvent(a,{action:"SignIn",element:"Button",element_name:d.bi?"SignIn":"SMSSignIn"},{account:d.ld("login")})});a((0,window.$)(".view-signup form",b),function(a){var b=a.Zb(),b=b.phone_num||b.account,c=d.ci?HO(b):!1;d.sa({category:"sign_up",action:b?d.ci?"click_sign_up_submit_"+(c?"email":"phone"):"click_sign_up_submit_phone":"click_sign_up_submit_no_channel"});z.V.trackEvent(a,{action:"SignUp",element:"Button"},{account:d.ld("register")})});(0,window.$)(".js-bindweibo",b).click(function(){d.sa({category:"sign_in_or_sign_up",
        action:"click_sign_with_weibo_start"});z.V.trackEvent(this,{action:"SignIn",element:"Button"},{account:{type:"Weibo"}});z.kj("sina")});(0,window.$)(".js-bindqq",b).click(function(){d.sa({category:"sign_in_or_sign_up",action:"click_sign_with_qq_start"});z.V.trackEvent(this,{action:"SignIn",element:"Button"},{account:{type:"QQ"}});z.kj("qq")});(0,window.$)(".js-bindwechat",b).click(function(){d.sa({category:"sign_in_or_sign_up",action:"click_sign_with_wechat_start"});z.V.trackEvent(this,{action:"SignIn",
        element:"Button"},{account:{type:"Wechat"}});z.kj("wechat")});(0,window.$)(".js-toggle-sns-buttons").click(function(a){var b=(0,window.$)(".sns-buttons");b.hasClass("is-visible")?b.onTransitionEnd(function(){b.css("visibility","hidden")},250).removeClass("is-visible"):(z.V.trackEvent(a.target,{action:"Click",element:"Button",element_name:"SNSSignIn"}),b.css("visibility","visible").addClass("is-visible"))})};
    z.e.ld=function(a){var b="register"===a?(0,window.$)("form",this.me):(0,window.$)("form",this.qb),c={type:"Zhihu"};"register"===a&&(c.name=(0,window.$)('[name\x3d"fullname"]',b).val()||null);a=(0,window.$)('[name\x3d"account"]',b).val();HO(a)?c.email=a||null:c.phone=a||null;return c};
    z.e.tB=function(a){var b=this,c=(0,window.$)(a),d=c.Zb(),f=HO(d.account);this.sa({category:"sign_in",action:"sign_in_front_end_pass_"+(f?"email":"phone")});a=f?"/login/email":this.bi?"/login/phone_num":"/login/sms_code";z.ik&&(d.is_org_page=1);f?IO(d,"email"):IO(d,"phone_num");var g=this.Oh.info();return window.$.post(a,d,function(a){var k=a&&!a.r;if(k)if(b.sa({Zc:!0,category:"sign_in",action:"sign_in_success_"+(f?"email":"phone")}),"wechat"===z.be(window.location.href,"oauth")&&z.lj){var l=window.location.href.replace(/next=(.+?)&/,
        function(a,b){var c=(0,window.decodeURIComponent)(b);return"next\x3d"+(0,window.encodeURIComponent)(-1===c.indexOf("?")?c+"?oauthsuccess\x3dwechat":c+"\x26oauthsuccess\x3dwechat")+"\x26"});window.$.get("/oauth/bind",function(a){a.data.wechat?b.td():(window.history.pushState({},"",l),z.kj("wechatQuickBind"))})}else b.td();else if(1991831===a.errcode){var p=new z.ek({data:{phone_num:d.phone_num,password:d.password},OV:function(a){c.data("validator").showErrors(a)}});p.yb(b);p.F(!0)}else z.Kj(b.Oh,Boolean(a.data.captcha)),
        c.data("validator").showErrors(a.data);z.V.trackEvent(b.qb.get(0),{action:"StatusReport",element_name:b.bi?"SignIn":"SMSSignIn"},Object.assign({status:{result:k?"Success":"Fail",error_msg:a.data?window.$.map(a.data,function(a,b){return b+":"+a}):null,event:{action:"SignIn",element:"Button"}},account:b.ld("login")},g))})};
    z.e.sq=function(a){var b=this,c=this;a=(0,window.$)(a);var d=a.Zb(),f=c.ci?HO(d.account):!1;c.sa({Zc:!0,category:"sign_up",action:"sign_up_front_end_pass_"+(f?"email":"phone")});var g=f?"/register/email":"/register/phone_num/validation";z.ik&&(f=!0,g="/register/org");f?IO(d,"email"):IO(d,"phone_num");var h=this.Fn.stop();d.userInfo=JSON.stringify(h);d.captcha_source="register";var k=a.data("validator"),l=c.Zk.info();return window.$.post(g,d,function(a){var g=a&&!a.r;if(f)g?(c.sa({Zc:!0,category:"sign_up",
        action:"sign_up_success_email"}),c.td()):(z.Kj(c.Zk),k.showErrors(a.data));else if(g){var h=new z.jw(d);h.yb(c);h.F(!0)}else z.Kj(c.Zk),c.ci||IO(a.data,"phone_num"),k.showErrors(a.data);z.V.trackEvent(b.me.get(0),{action:"StatusReport"},Object.assign({status:{result:g?"Success":"Fail",error_msg:a.data?window.$.map(a.data,function(a,b){return b+":"+a}):null,event:{action:"SignUp",element:"Button"}},account:b.ld("register")},l))})};
    z.e.dm=function(){if(!z.Yj){var a=this.h;(0,window.setTimeout)(function(){(0,window.$)("input[placeholder]:visible",a).placeholder()},10)}};z.e.sp=function(){z.nj(this.o(),this.cV)};
    z.e.cV=function(a){a=a.Rg;var b={qqconn:"qq",wechat:"wechat",sina:"weibo"}[a.type];1===a.login?(this.sa({Zc:!0,category:"sign_in",action:"sign_in_success_"+b}),z.V.trackEvent((0,window.$)(".js-bind"+b),{action:"StatusReport",element_name:this.bi?"SignIn":"SMSSignIn"},{status:{result:"Success",event:{action:"SignIn",element:"Button"}},account:{type:{qqconn:"QQ",wechat:"Wechat",sina:"Weibo"}[a.type]}}),this.td()):"wechat_mp"!==a.type&&(a=new z.nk(a),a.yb(this),a.show())};
    z.e.td=function(){var a=(new z.oj(window.location.href)).nd().get("next");window.location.href=a?a:"/"};z.Ca(FO.prototype,z.an);z.x("ZH.entrySignPage",function(){(new CO).init()});z.lg("page-index");}).call(this, __z_z__);
//# sourceURL=/static/revved/-/js/closure/page-index.db63ea44.js